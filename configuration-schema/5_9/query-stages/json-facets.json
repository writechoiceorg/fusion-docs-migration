{
  "type": "object",
  "title": "JSON facets",
  "description": "to be done",
  "properties": {
    "skip": {
      "type": "boolean",
      "title": "Skip This Stage",
      "description": "Set to true to skip this stage.",
      "default": false,
      "hints": [
        "advanced"
      ]
    },
    "label": {
      "type": "string",
      "title": "Label",
      "description": "A unique label for this stage.",
      "hints": [
        "advanced"
      ],
      "maxLength": 255
    },
    "condition": {
      "type": "string",
      "title": "Condition",
      "description": "Define a conditional script that must result in true or false. This can be used to determine if the stage should process or not.",
      "hints": [
        "code",
        "code/javascript",
        "advanced"
      ]
    },
    "legacy": {
      "type": "boolean",
      "title": "Legacy",
      "description": "True if this stage only supports legacy mode",
      "hints": [
        "readonly",
        "hidden"
      ]
    },
    "fieldFacets": {
      "type": "array",
      "title": "Field facets",
      "description": "Field facets to be applied",
      "items": {
        "type": "object",
        "required": [
          "field"
        ],
        "properties": {
          "field": {
            "type": "string",
            "title": "Field name",
            "description": "Field to facet on"
          },
          "prefix": {
            "type": "string",
            "title": "Prefix",
            "description": "Only produce buckets for terms starting with the specified prefix"
          },
          "sort": {
            "type": "string",
            "title": "Sort",
            "description": "Specifies how to sort the buckets produced.",
            "enum": [
              "count",
              "index"
            ],
            "default": "count"
          },
          "limit": {
            "type": "integer",
            "title": "Limit",
            "description": "Limits the number of buckets returned",
            "default": 10
          },
          "offset": {
            "type": "integer",
            "title": "Offset",
            "description": "Used for paging, this skips the first N buckets",
            "default": 0
          },
          "mincount": {
            "type": "integer",
            "title": "Minimum count",
            "description": "Only return buckets with a count of at least this number.",
            "default": 1
          },
          "missing": {
            "type": "boolean",
            "title": "Count missing",
            "description": "When enabled, a special “missing” bucket should be returned that is defined by documents without a value in the field.",
            "default": false
          },
          "method": {
            "type": "string",
            "title": "Method",
            "description": "The facet algorithm to use.",
            "enum": [
              "dv",
              "uif",
              "dvhash",
              "enum",
              "stream",
              "smart"
            ],
            "default": "smart"
          },
          "rollupFieldCount": {
            "type": "string",
            "title": "Rollup field count",
            "description": "The name of the field to apply grouping operation on each bucket "
          },
          "filterExclusion": {
            "type": "boolean",
            "title": "Filter exclusion",
            "description": "When enabled, multiple facet options can be selected.",
            "default": false
          },
          "displayZeroCount": {
            "type": "boolean",
            "title": "Display Zero Count Values",
            "description": "When enabled, empty buckets will be displayed",
            "default": false
          }
        }
      }
    },
    "rangeFacets": {
      "type": "array",
      "title": "Range facets",
      "description": "Range facets to be applied",
      "items": {
        "type": "object",
        "required": [
          "field",
          "start",
          "end",
          "gap"
        ],
        "properties": {
          "field": {
            "type": "string",
            "title": "Field name",
            "description": "Field to facet on"
          },
          "start": {
            "type": "string",
            "title": "Range start",
            "description": "Lower bound of the ranges"
          },
          "end": {
            "type": "string",
            "title": "Range end",
            "description": "Upper bound of the ranges"
          },
          "gap": {
            "type": "string",
            "title": "Range gap",
            "description": "Size of each range bucket produced."
          },
          "hardend": {
            "type": "boolean",
            "title": "Hard end",
            "description": "When enabled, it means that the last bucket will end at “end” even if it is less than “gap” wide. Otherwise, the last bucket will be “gap” wide, which may extend past “end”"
          },
          "include": {
            "type": "array",
            "title": "Include",
            "description": "Determine how the bucket boundaries should be processed",
            "items": {
              "type": "string",
              "enum": [
                "lower",
                "upper",
                "edge",
                "outer",
                "all"
              ]
            }
          },
          "other": {
            "type": "array",
            "title": "Other",
            "description": "Specifies additional counts",
            "items": {
              "type": "string",
              "enum": [
                "before",
                "after",
                "between",
                "none",
                "all"
              ]
            }
          },
          "rollupFieldCount": {
            "type": "string",
            "title": "Rollup field count",
            "description": "The name of the field to apply the grouping operation on each bucket "
          },
          "filterExclusion": {
            "type": "boolean",
            "title": "Filter exclusion",
            "description": "When enabled, multiple facet options can be selected."
          },
          "displayZeroCount": {
            "type": "boolean",
            "title": "Display Zero Count Values",
            "description": "When enabled, empty buckets will be displayed",
            "default": false
          }
        }
      }
    }
  },
  "category": "Set Up",
  "categoryPriority": 8,
  "unsafe": false
}
