{
  "type": "object",
  "title": "Query Fields",
  "description": "Configure query parameters for Solr search",
  "properties": {
    "skip": {
      "type": "boolean",
      "title": "Skip This Stage",
      "description": "Set to true to skip this stage.",
      "default": false,
      "hints": [
        "advanced"
      ]
    },
    "label": {
      "type": "string",
      "title": "Label",
      "description": "A unique label for this stage.",
      "hints": [
        "advanced"
      ],
      "maxLength": 255
    },
    "condition": {
      "type": "string",
      "title": "Condition",
      "description": "Define a conditional script that must result in true or false. This can be used to determine if the stage should process or not.",
      "hints": [
        "code",
        "code/javascript",
        "advanced"
      ]
    },
    "legacy": {
      "type": "boolean",
      "title": "Legacy",
      "description": "True if this stage only supports legacy mode",
      "hints": [
        "readonly",
        "hidden"
      ]
    },
    "rows": {
      "type": "integer",
      "title": "Number of Results",
      "default": 10
    },
    "start": {
      "type": "integer",
      "title": "Result Offset",
      "default": 0
    },
    "sort": {
      "type": "string",
      "title": "Sort Order (Deprecated)"
    },
    "sortOrder": {
      "type": "array",
      "title": "Results Sort Order",
      "items": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "title": "Sort Type",
            "enum": [
              "field",
              "expression",
              "relevancy",
              "query"
            ]
          },
          "value": {
            "type": "string",
            "title": "Field Name or Expression"
          },
          "order": {
            "type": "string",
            "title": "Sort Order",
            "enum": [
              "asc",
              "desc"
            ]
          }
        }
      }
    },
    "queryFields": {
      "type": "array",
      "title": "Search Fields",
      "items": {
        "type": "object",
        "properties": {
          "field": {
            "type": "string",
            "title": "Field Name"
          },
          "boost": {
            "type": "number",
            "title": "Field Boost"
          }
        }
      }
    },
    "returnFields": {
      "type": "array",
      "title": "Return Fields",
      "items": {
        "type": "string"
      }
    },
    "returnScore": {
      "type": "boolean",
      "title": "Return Score",
      "default": true
    },
    "minimumMatch": {
      "type": "string",
      "title": "Minimum Should Match"
    },
    "group": {
      "type": "object",
      "title": "Grouping Options",
      "properties": {
        "field": {
          "type": "string",
          "title": "Grouping Field"
        },
        "size": {
          "type": "integer",
          "title": "Group Size",
          "description": "The number of results per group."
        },
        "sort": {
          "type": "array",
          "title": "Group Sort",
          "description": "Determines the order of results within each group.",
          "items": {
            "type": "object",
            "properties": {
              "type": {
                "type": "string",
                "title": "Sort Type",
                "enum": [
                  "field",
                  "expression",
                  "relevancy",
                  "query"
                ]
              },
              "value": {
                "type": "string",
                "title": "Field Name or Expression"
              },
              "order": {
                "type": "string",
                "title": "Sort Order",
                "enum": [
                  "asc",
                  "desc"
                ]
              }
            }
          }
        },
        "leaderStrategy": {
          "type": "object",
          "title": "Group Leader Strategy",
          "description": "Optional selection criteria for the representative document from each group. Only one method may be used at a time. Defaults to relevancy if not specified.",
          "properties": {
            "fieldLeader": {
              "type": "object",
              "title": "By Field Value",
              "description": "Selects the document with the minimum or maximum value for the indicated field to be the representative document for each group.",
              "properties": {
                "field": {
                  "type": "string",
                  "title": "Field"
                },
                "selector": {
                  "type": "string",
                  "title": "Selector",
                  "enum": [
                    "min",
                    "max"
                  ]
                }
              }
            },
            "sortLeader": {
              "type": "object",
              "title": "By Sort",
              "description": "Selects the representative document for each group based on the order they would be returned with the given sort criteria.",
              "properties": {
                "sort": {
                  "type": "array",
                  "title": "Sort",
                  "items": {
                    "type": "object",
                    "properties": {
                      "type": {
                        "type": "string",
                        "title": "Sort Type",
                        "enum": [
                          "field",
                          "expression",
                          "relevancy",
                          "query"
                        ]
                      },
                      "value": {
                        "type": "string",
                        "title": "Field Name or Expression"
                      },
                      "order": {
                        "type": "string",
                        "title": "Sort Order",
                        "enum": [
                          "asc",
                          "desc"
                        ]
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  },
  "category": "Set Up",
  "categoryPriority": 8,
  "unsafe": false
}
