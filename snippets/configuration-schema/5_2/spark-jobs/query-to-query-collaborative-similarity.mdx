export const schema = {
  "additionalProperties": true,
  "category": "Other",
  "categoryPriority": 1,
  "description": "Use this job to to batch compute query-query similarities using ALS.",
  "properties": {
    "alwaysTrain": {
      "default": true,
      "description": "Even if a model with this modelId exists, re-train if set true",
      "title": "Force model re-training",
      "type": "boolean"
    },
    "gridSearchWidth": {
      "default": 1,
      "description": "Parameter grid search to be done centered around initial parameter guesses, exponential step size, this number of steps (if <= 0, no grid search)",
      "hints": [
        "advanced"
      ],
      "title": "Grid Search Width",
      "type": "integer"
    },
    "id": {
      "description": "The ID for this Spark job. Used in the API to reference this job. Allowed characters: a-z, A-Z, dash (-) and underscore (_). Maximum length: 63 characters.",
      "maxLength": 63,
      "pattern": "[a-zA-Z][_\\-a-zA-Z0-9]*[a-zA-Z0-9]?",
      "title": "Spark Job ID",
      "type": "string"
    },
    "implicitRatings": {
      "default": true,
      "description": "Treat training preferences as implicit signals of interest (i.e. clicks or other actions) as opposed to explicit query ratings",
      "title": "Implicit Preferences",
      "type": "boolean"
    },
    "initialAlpha": {
      "default": 0.5,
      "description": "Confidence weight (between 0 and 1) to give the implicit preferences (or starting guess, if doing parameter grid search)",
      "hints": [
        "advanced"
      ],
      "title": "Implicit Preference Confidence",
      "type": "number"
    },
    "initialBlocks": {
      "default": -1,
      "description": "Number of sub-matrix blocks to break the training data into (default: -1, for auto-sizing)",
      "hints": [
        "hidden"
      ],
      "title": "Training Block Size",
      "type": "integer"
    },
    "initialLambda": {
      "default": 0.01,
      "description": "Smoothing parameter to avoid overfitting (or starting guess, if doing parameter grid search). Slightly larger value needed for small data sets",
      "hints": [
        "advanced"
      ],
      "title": "Smoothing",
      "type": "number"
    },
    "initialRank": {
      "default": 100,
      "description": "Number of user/item factors in the recommender decomposition (or starting guess for it, if doing parameter grid search)",
      "hints": [
        "advanced"
      ],
      "title": "Recommender Rank",
      "type": "integer"
    },
    "itemIdField": {
      "default": "item_id_s",
      "description": "Solr field name containing stored item ids",
      "hints": [
        "advanced"
      ],
      "title": "Training Collection Item Id Field",
      "type": "string"
    },
    "maxTrainingIterations": {
      "default": 10,
      "description": "Maximum number of iterations to use when learning the matrix decomposition",
      "hints": [
        "advanced"
      ],
      "title": "Maximum Training Iterations",
      "type": "integer"
    },
    "modelCollection": {
      "description": "Collection to load and store the computed model (if absent, it won't be loaded or saved)",
      "hints": [
        "advanced"
      ],
      "title": "Model Collection",
      "type": "string"
    },
    "modelId": {
      "description": "Identifier for the recommender model. Will be used as the unique key when storing the model in Solr.",
      "hints": [
        "advanced"
      ],
      "title": "Recommender Model ID",
      "type": "string"
    },
    "numItemsPerQuery": {
      "default": 10,
      "description": "Batch compute and store this many item recommendations per query",
      "hints": [
        "advanced"
      ],
      "title": "Number of Items per Query to Recommend",
      "type": "integer"
    },
    "numSims": {
      "default": 10,
      "description": "Batch compute and store this many query similarities per query",
      "hints": [
        "advanced"
      ],
      "title": "Number of Query Similarities to Compute",
      "type": "integer"
    },
    "outputItemsForQueriesCollection": {
      "description": "Collection to store batch-computed items-for-queries recommendations (if absent, none computed)",
      "title": "Items-for-query Boosting Collection",
      "type": "string"
    },
    "outputQuerySimCollection": {
      "description": "Collection to store batch-computed query/query similarities (if absent, none computed)",
      "title": "Query-to-query Similarity Collection",
      "type": "string"
    },
    "popularQueryMin": {
      "default": 2,
      "description": "Items must have at least this # of unique users interacting with it to go into the sample",
      "hints": [
        "advanced"
      ],
      "title": "Training Data Filter By Popular Items",
      "type": "integer"
    },
    "queryField": {
      "default": "query",
      "description": "Solr field name containing stored queries",
      "hints": [
        "advanced"
      ],
      "title": "Training Collection Query Field",
      "type": "string"
    },
    "randomSeed": {
      "default": 13,
      "description": "Pseudorandom determinism fixed by keeping this seed constant",
      "hints": [
        "advanced"
      ],
      "title": "Random Seed",
      "type": "integer"
    },
    "saveModel": {
      "default": false,
      "description": "Whether we should save the computed ALS model in Solr",
      "hints": [
        "advanced"
      ],
      "title": "Save Model in Solr",
      "type": "boolean"
    },
    "sparkConfig": {
      "description": "Spark configuration settings.",
      "hints": [
        "advanced"
      ],
      "items": {
        "properties": {
          "key": {
            "title": "Parameter Name",
            "type": "string"
          },
          "value": {
            "title": "Parameter Value",
            "type": "string"
          }
        },
        "required": [
          "key"
        ],
        "type": "object"
      },
      "title": "Spark Settings",
      "type": "array"
    },
    "trainingCollection": {
      "description": "Item/Query preference collection (often a signals collection or signals aggregation collection)",
      "title": "Recommender Training Collection",
      "type": "string"
    },
    "trainingDataFilterQuery": {
      "default": "*:*",
      "description": "Solr query to filter training data (e.g. downsampling or selecting based on min. pref values)",
      "hints": [
        "advanced"
      ],
      "title": "Training Data Filter Query",
      "type": "string"
    },
    "trainingDataFrameConfigOptions": {
      "additionalProperties": {
        "type": "string"
      },
      "description": "Additional spark dataframe loading configuration options",
      "hints": [
        "advanced"
      ],
      "properties": {},
      "title": "Dataframe Config Options",
      "type": "object"
    },
    "trainingSampleFraction": {
      "default": 1,
      "description": "Downsample preferences for items (bounded to at least 2) by this fraction",
      "exclusiveMaximum": false,
      "hints": [
        "advanced"
      ],
      "maximum": 1,
      "title": "Training Data Sampling Fraction",
      "type": "number"
    },
    "type": {
      "default": "query_similarity",
      "enum": [
        "query_similarity"
      ],
      "hints": [
        "readonly"
      ],
      "title": "Spark Job Type",
      "type": "string"
    },
    "weightField": {
      "default": "weight_d",
      "description": "Solr field name containing stored weights (i.e. time decayed / position weighted counts) the item has for that query",
      "hints": [
        "advanced"
      ],
      "title": "Training Collection Weight Field",
      "type": "string"
    },
    "writeOptions": {
      "description": "Options used when writing output to Solr.",
      "hints": [
        "advanced"
      ],
      "items": {
        "properties": {
          "key": {
            "title": "Parameter Name",
            "type": "string"
          },
          "value": {
            "title": "Parameter Value",
            "type": "string"
          }
        },
        "required": [
          "key"
        ],
        "type": "object"
      },
      "title": "Write Options",
      "type": "array"
    }
  },
  "propertyGroups": [
    {
      "label": "Input/Output Parameters",
      "properties": [
        "trainingCollection",
        "trainingDataFilterQuery",
        "modelCollection",
        "outputItemsForQueriesCollection",
        "outputQuerySimCollection",
        "writeOptions",
        "trainingDataFrameConfigOptions",
        "trainingSampleFraction",
        "randomSeed"
      ]
    },
    {
      "label": "Field Parameters",
      "properties": [
        "queryField",
        "itemIdField",
        "weightField"
      ]
    },
    {
      "label": "Model Tuning Parameters",
      "properties": [
        "alwaysTrain",
        "saveModel",
        "gridSearchWidth",
        "implicitRatings",
        "initialAlpha",
        "initialLambda",
        "initialRank",
        "maxTrainingIterations",
        "numItemsPerQuery",
        "numSims",
        "popularQueryMin"
      ]
    },
    {
      "label": "Misc. Parameters",
      "properties": [
        "modelId"
      ]
    }
  ],
  "required": [
    "id",
    "trainingCollection",
    "outputQuerySimCollection",
    "type"
  ],
  "title": "Query-to-Query Collaborative Similarity",
  "type": "object"
}
